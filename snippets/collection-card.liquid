{% comment %}
  Collection Card Snippet
  Displays a collection with image, title, and product count
  Uses the pink/coral color scheme: #ff6b9d, #e84a7f, #ff8e53
{% endcomment %}

{%- assign collection = collection -%}

<div class="collection-card">
  <a href="{{ collection.url }}" class="collection-card__link">
    <div class="collection-card__media">
      {% if collection.featured_image %}
        <img
          src="{{ collection.featured_image | image_url: width: 800 }}"
          alt="{{ collection.featured_image.alt | escape }}"
          class="collection-card__image"
          loading="lazy"
          width="800"
          height="{{ 800 | divided_by: collection.featured_image.aspect_ratio | floor }}"
        >
      {% else %}
        {{ 'collection-1' | placeholder_svg_tag: 'collection-card__image collection-card__image--placeholder' }}
      {% endif %}

      <div class="collection-card__overlay">
        <span class="collection-card__count">
          {{ collection.products_count }}
          {% if collection.products_count == 1 %}
            {{ 'sections.collections.product' | t }}
          {% else %}
            {{ 'sections.collections.products' | t }}
          {% endif %}
        </span>
      </div>
    </div>

    <div class="collection-card__info">
      <h3 class="collection-card__title">
        {{ collection.title | escape }}
      </h3>
      <span class="collection-card__link-text">
        {{ 'sections.collections.shop_now' | t }}
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <line x1="5" y1="12" x2="19" y2="12"></line>
          <polyline points="12 5 19 12 12 19"></polyline>
        </svg>
      </span>
    </div>
  </a>
</div>

<style>
  .collection-card {
    position: relative;
    display: block;
    border-radius: 16px;
    overflow: hidden;
    background: #fff;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
  }

  .collection-card:hover {
    transform: translateY(-6px);
    box-shadow: 0 16px 32px rgba(255, 107, 157, 0.2);
  }

  .collection-card__link {
    text-decoration: none;
    color: inherit;
    display: block;
  }

  .collection-card__media {
    position: relative;
    aspect-ratio: 4/3;
    overflow: hidden;
  }

  .collection-card__image {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform 0.5s ease;
  }

  .collection-card:hover .collection-card__image {
    transform: scale(1.08);
  }

  .collection-card__overlay {
    position: absolute;
    top: 12px;
    right: 12px;
  }

  .collection-card__count {
    display: inline-block;
    padding: 8px 14px;
    background: rgba(255, 255, 255, 0.95);
    color: #e84a7f;
    font-size: 13px;
    font-weight: 600;
    border-radius: 20px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  }

  .collection-card__info {
    padding: 20px;
    text-align: center;
  }

  .collection-card__title {
    font-size: 20px;
    font-weight: 700;
    color: #1a1a1a;
    margin: 0 0 8px;
    transition: color 0.2s ease;
  }

  .collection-card:hover .collection-card__title {
    color: #e84a7f;
  }

  .collection-card__link-text {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    font-size: 14px;
    font-weight: 600;
    color: #ff6b9d;
    transition: all 0.2s ease;
  }

  .collection-card__link-text svg {
    transition: transform 0.2s ease;
  }

  .collection-card:hover .collection-card__link-text {
    color: #e84a7f;
  }

  .collection-card:hover .collection-card__link-text svg {
    transform: translateX(4px);
  }

  .collection-card__image--placeholder {
    background: linear-gradient(135deg, #fce4ec 0%, #f8bbd9 100%);
  }
</style>

{% schema %}
{
  "name": "Collection Card",
  "settings": [
    {
      "type": "header",
      "content": "Collection Card Settings"
    },
    {
      "type": "checkbox",
      "id": "show_product_count",
      "default": true,
      "label": "Show product count"
    },
    {
      "type": "checkbox",
      "id": "show_shop_now",
      "default": true,
      "label": "Show shop now link"
    },
    {
      "type": "select",
      "id": "image_ratio",
      "options": [
        {
          "value": "portrait",
          "label": "Portrait"
        },
        {
          "value": "square",
          "label": "Square"
        },
        {
          "value": "landscape",
          "label": "Landscape"
        }
      ],
      "default": "landscape",
      "label": "Image ratio"
    }
  ]
}
{% endschema %}
