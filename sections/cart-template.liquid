<div class="cart-page page-width">
  <div class="cart-page__header">
    <h1 class="cart-page__title">Shopping Cart</h1>
    <a href="{{ routes.collections_url }}" class="cart-page__continue">Continue Shopping</a>
  </div>

  {% if cart == empty %}
    <div class="cart-page__empty">
      <p>Your cart is empty</p>
      <a href="{{ routes.collections_url }}" class="button button--primary">Start Shopping</a>
    </div>
  {% else %}
    <form action="{{ routes.cart_url }}" id="cart-form" class="cart-form" method="post">
      <div class="cart-page__items">
        {% for item in cart.items %}
          <div class="cart-item">
            <div class="cart-item__media">
              <a href="{{ item.url }}">
                {% if item.image %}
                  {{ item.image | image_url: width: 200 | image_tag: loading: 'lazy', alt: item.title }}
                {% else %}
                  {{ 'product-1' | placeholder_svg_tag: 'placeholder-svg' }}
                {% endif %}
              </a>
            </div>
            <div class="cart-item__details">
              <a href="{{ item.url }}" class="cart-item__title">{{ item.product.title }}</a>

              {% if item.product.has_only_default_variant == false %}
                <div class="cart-item__options">
                  {% for option in item.options_with_values %}
                    <span class="cart-item__option">{{ option.name }}: {{ option.value }}</span>
                  {% endfor %}
                </div>
              {% endif %}

              <div class="cart-item__price">
                {% if item.original_line_price != item.line_price %}
                  <span class="price price--on-sale">{{ item.line_price | money }}</span>
                  <span class="price price--regular">{{ item.original_line_price | money }}</span>
                {% else %}
                  <span class="price">{{ item.line_price | money }}</span>
                {% endif %}

                {% if item.unit_price_measurement %}
                  <span class="unit-price">
                    {{ item.unit_price | money }}/{{ item.unit_price_measurement.reference_value }}{{ item.unit_price_measurement.reference_unit }}
                  </span>
                {% endif %}
              </div>

              <div class="cart-item__quantity">
                <label for="quantity-{{ item.index | plus: 1 }}" class="visually-hidden">Quantity</label>
                <quantity-input class="quantity">
                  <button class="quantity__button" name="minus" type="button">-</button>
                  <input
                    type="number"
                    id="quantity-{{ item.index | plus: 1 }}"
                    name="updates[]"
                    value="{{ item.quantity }}"
                    min="0"
                    aria-label="{{ 'products.product.quantity.label' | t }}"
                    class="quantity__input"
                  >
                  <button class="quantity__button" name="plus" type="button">+</button>
                </quantity-input>

                <cart-remove-button id="cart-remove-{{ item.index | plus: 1 }}" data-index="{{ item.index | plus: 1 }}">
                  <button type="button" class="cart-remove__button" aria-label="{{ 'sections.cart.remove_title' | t: title: item.title }}">
                    {% render 'icon-remove' %}
                  </button>
                </cart-remove-button>
              </div>

              <div class="cart-item__line-price">
                <span class="price">{{ item.line_price | money }}</span>
              </div>
            </div>
          </div>
        {% endfor %}
      </div>

      <div class="cart-page__footer">
        <div class="cart-page__notes">
          {% if section.settings.show_cart_note %}
            <label for="cart-note" class="cart-note__label">Special instructions for seller</label>
            <textarea name="note" id="cart-note" class="cart-note__input">{{ cart.note }}</textarea>
          {% endif %}
        </div>

        <div class="cart-page__totals">
          <div class="cart-subtotals">
            <div class="cart-subtotals__row">
              <span>Subtotal</span>
              <span class="price">{{ cart.total_price | money }}</span>
            </div>
            <div class="cart-subtotals__shipping">
              <p>Shipping & taxes calculated at checkout</p>
            </div>
          </div>

          <div class="cart-page__buttons">
            <button type="submit" name="checkout" class="button button--primary cart-checkout__button">
              {{ 'sections.cart.checkout' | t }}
            </button>
          </div>

          {% if additional_checkout_buttons %}
            <div class="cart-page__additional-buttons">
              {{ additional_checkout_buttons }}
            </div>
          {% endif %}
        </div>
      </div>
    </form>
  {% endif %}
</div>

{% schema %}
{
  "name": "Cart",
  "settings": [
    {
      "type": "checkbox",
      "id": "show_cart_note",
      "default": true,
      "label": "Show cart note"
    }
  ]
}
{% endschema %}
